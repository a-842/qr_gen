{% extends 'base.html' %}

{% block body %}

<!-- Buttons to switch between different input types -->
<div id="form-buttons">
    <button class="form-button" onclick="showForm('string')">String</button>
    <button class="form-button" onclick="showForm('contact')">Contact</button>
    <button class="form-button" onclick="showForm('wifi')">WiFi</button>
</div>

<!-- String Form -->
<div id="form-string">
    <form action="/result" method="post">
        <input type="hidden" name="form_type" value="string">
        <label for="data">Data:</label>
        <input type="text" id="data" name="data" required>

        <label for="data_type">Data Type:</label>
        <select id="data_type" name="data_type" required>
            <option value="numeric">Numeric</option>
            <option value="alphanumeric">Alphanumeric</option>
            <option value="bytes">Bytes</option>
        </select>

        <label for="eclevel">Error Correction Level:</label>
        <select id="eclevel" name="eclevel" required>
            <option value="L">Low (L)</option>
            <option value="M">Medium (M)</option>
            <option value="Q">Quartile (Q)</option>
            <option value="H">High (H)</option>
        </select>

        <button class="form-button" type="submit">Generate QR Code</button>
    </form>
</div>

<!-- Contact Form -->
<div id="form-contact" style="display: none;">
    <form action="/result" method="post">
        <input type="hidden" name="form_type" value="contact">
        <label for="fname">First Name:</label>
        <input type="text" id="fname" name="fname" required>

        <label for="lname">Last Name:</label>
        <input type="text" id="lname" name="lname" required>

        <label for="title">Title:</label>
        <input type="text" id="title" name="title" required>

        <label for="gender">Gender:</label>
        <input type="text" id="gender" name="gender">

        <label for="bday">Birthday:</label>
        <input type="date" id="bday" name="bday">

        <label for="email">Email:</label>
        <input type="email" id="email" name="email">

        <label for="phone">Phone:</label>
        <input type="tel" id="phone" name="phone">

        <label for="street">Street:</label>
        <input type="text" id="street" name="street">

        <label for="city">City:</label>
        <input type="text" id="city" name="city">

        <label for="county">County:</label>
        <input type="text" id="county" name="county">

        <label for="postcode">Postcode:</label>
        <input type="text" id="postcode" name="postcode">

        <label for="country">Country:</label>
        <input type="text" id="country" name="country">

        <label for="role">Role:</label>
        <input type="text" id="role" name="role">

        <label for="org">Organization:</label>
        <input type="text" id="org" name="org">

        <label for="url">Website:</label>
        <input type="url" id="url" name="url">

        <label for="eclevel">Error Correction Level:</label>
        <select id="eclevel" name="eclevel" required>
            <option value="L">Low (L)</option>
            <option value="M">Medium (M)</option>
            <option value="Q">Quartile (Q)</option>
            <option value="H">High (H)</option>
        </select>

        <button class="form-button" type="submit">Generate QR Code</button>
    </form>
</div>

<!-- WiFi Form -->
<div id="form-wifi" style="display: none;">
    <form action="/result" method="post">
        <input type="hidden" name="form_type" value="wifi">
        <label for="ssid">SSID:</label>
        <input type="text" id="ssid" name="ssid" required>

        <label for="password">Password:</label>
        <input type="password" id="password" name="password" required>

        <label for="encryption">Encryption Type:</label>
        <select id="encryption" name="encryption" required>
            <option value="WPA">WPA</option>
            <option value="WPA2">WPA2</option>
            <option value="WEP">WEP</option>
            <option value="None">None</option>
        </select>

        <label for="eclevel">Error Correction Level:</label>
        <select id="eclevel" name="eclevel" required>
            <option value="L">Low (L)</option>
            <option value="M">Medium (M)</option>
            <option value="Q">Quartile (Q)</option>
            <option value="H">High (H)</option>
        </select>

        <button class="form-button" type="submit">Generate QR Code</button>
    </form>
</div>
<!-- script for switching -->
<script>
    function showForm(formType) {
        document.getElementById('form-string').style.display = 'none';
        document.getElementById('form-contact').style.display = 'none';
        document.getElementById('form-wifi').style.display = 'none';

        document.getElementById('form-' + formType).style.display = 'block';

    }


</script>
<!-- contact form logic -->
<script>
document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("#form-contact form");

    form.addEventListener("submit", function (event) {
        let valid = true;
        let errors = [];

        // Get form elements
        const fname = document.getElementById("fname");
        const lname = document.getElementById("lname");
        const phone = document.getElementById("phone");
        const email = document.getElementById("email");

        // Reset previous error styling
        document.querySelectorAll("input").forEach(input => {
            input.style.border = "";
        });

        // Check if any data is entered at all
        const hasData = [...form.elements].some(input => input.type !== "hidden" && input.value.trim() !== "");

        if (!hasData) {
            event.preventDefault();
            errors.push("Please enter some data");
            document.querySelectorAll("input").forEach(input => {
                if (input.type !== "hidden") input.style.border = "2px solid red";
            });
        }

        // Check first name
        if (fname.value.trim() === "") {
            event.preventDefault();
            valid = false;
            errors.push("Are you sure you want to proceed without a first name?");
            fname.style.border = "2px solid red";
        }

        // Check last name
        if (lname.value.trim() === "") {
            event.preventDefault();
            valid = false;
            errors.push("Are you sure you want to proceed without a surname?");
            lname.style.border = "2px solid red";
        }

        // Validate phone number format
        const phoneRegex = /^\+?\d{2,3}\s?\d{4,5}\s?\d{5,6}$/;
        if (phone.value.trim() !== "" && !phoneRegex.test(phone.value.trim())) {
            event.preventDefault();
            valid = false;
            errors.push("Please enter a phone number in the format ‘+xx xxxxx xxxxxx’");
            phone.style.border = "2px solid red";
        }

        // Validate email format
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (email.value.trim() !== "" && !emailRegex.test(email.value.trim())) {
            event.preventDefault();
            valid = false;
            errors.push("Please enter a valid email");
            email.style.border = "2px solid red";
        }

        // Show error messages
        if (!valid || errors.length > 0) {
            event.preventDefault();
            alert(errors.join("\n"));
        }
    });
});
</script>


{% endblock %}

